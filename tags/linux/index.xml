<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>linux on Jan Malčák</title><link>https://jan.malcak.cz/tags/linux/</link><description>Recent content in linux on Jan Malčák</description><generator>Hugo -- gohugo.io</generator><copyright>Po nocích píše Honza</copyright><lastBuildDate>Sat, 14 Mar 2015 22:49:00 +0200</lastBuildDate><atom:link href="https://jan.malcak.cz/tags/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Arduino: Odpojení při nahrávání programu</title><link>https://jan.malcak.cz/arduino-odpojeni-pri-nahravani-programu/</link><pubDate>Sat, 14 Mar 2015 22:49:00 +0200</pubDate><guid>https://jan.malcak.cz/arduino-odpojeni-pri-nahravani-programu/</guid><description>Při experimentování s Arduinem jsem narazil na podivný problém. Po několika malých úpravách kódu mi editor při nahrávání programu hlásil
Error opening serial port '/dev/ttyACM1' To vše doplněné dlouhým výpisem kde se chyba vyskytla.
Jako by to nestačilo, Arduino se poté odpojí. Pro připojení bylo nutné vytáhnout a opět zastrčit napájecí USB kabel. Tím se bohužel problém s odpojováním nevyřešil. Obšírným nahlédnutím do složky /dev jsem zjistil, že soubor ttyACM1 existuje.</description><content>&lt;p>Při experimentování s Arduinem jsem narazil na podivný problém. Po několika malých úpravách kódu mi editor při nahrávání programu hlásil&lt;/p>
&lt;pre>&lt;code>Error opening serial port '/dev/ttyACM1'
&lt;/code>&lt;/pre>
&lt;p>To vše doplněné dlouhým výpisem kde se chyba vyskytla.&lt;/p>
&lt;p>Jako by to nestačilo, Arduino se poté odpojí. Pro připojení bylo nutné vytáhnout a opět zastrčit napájecí USB kabel. Tím se bohužel problém s odpojováním nevyřešil. Obšírným nahlédnutím do složky &lt;code>/dev&lt;/code> jsem zjistil, že soubor &lt;code>ttyACM1&lt;/code> existuje. Příkaz &lt;code>lsusb&lt;/code> Arduino našel. Problém tedy musel být někde jinde.&lt;/p>
&lt;p>Problém přetrvával i po změně zdrojového kódu či načtení některého z příkladů. Nezbylo mi tak, než použít Google. Dle všeho šlo o přepsání hodnoty:&lt;/p>
&lt;pre>&lt;code>Serial.begin(9600);
&lt;/code>&lt;/pre>
&lt;p>na&lt;/p>
&lt;pre>&lt;code>Serial.begin(14400);
&lt;/code>&lt;/pre>
&lt;p>Nová hodnota se uloží do uživatelského nastavení. Z nějakého mě neznámého důvodu zůstane tato hodnota v nastavení &amp;ldquo;zadrblá&amp;rdquo; i po opětovné úpravě zdrojáků. Je tedy nutné smazat soubor s nastavením (u mě &lt;code>~/arduino/preferences.txt&lt;/code> a restartovat editor.&lt;/p></content></item><item><title>C++: Existuje soubor?</title><link>https://jan.malcak.cz/cpp-existuje-soubor/</link><pubDate>Thu, 04 Jul 2013 14:20:00 +0200</pubDate><guid>https://jan.malcak.cz/cpp-existuje-soubor/</guid><description>Pokud bych chtěl jsen přečíst data, jde o problém celkem triviální. Stačí se pokusit tento soubor otevřít. Cest je opět několik:
Takový postup bude ve většině případů plně dostačující. Pro úplnost uvedu ještě příklad s využitím funkce access
Co ale dělat v případě, že chceme o souboru zjistit více informací? Je soubor spustitelný? Jaká je jeho velikost? Jaké je ID vlastníka? V takovém případě se můžeme opřít o funkci stat</description><content>&lt;p>Pokud bych chtěl jsen přečíst data, jde o problém celkem triviální. Stačí se pokusit tento soubor otevřít. Cest je opět několik:&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Takový postup bude ve většině případů plně dostačující. Pro úplnost uvedu ještě příklad s využitím funkce &lt;code>access&lt;/code>&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;p>Co ale dělat v případě, že chceme o souboru zjistit více informací? Je soubor spustitelný? Jaká je jeho velikost? Jaké je ID vlastníka? V takovém případě se můžeme opřít o funkci &lt;code>stat&lt;/code>&lt;/p>
&lt;pre>&lt;code>// Funkce bere jako parametr jméno souboru a ukazatel na strukturu do které má doplnit data
int stat(const char *filename, struct stat *buf);
&lt;/code>&lt;/pre>
&lt;p>Obsah struktury jde vyčíst třeba na &lt;a href="http://en.wikipedia.org/wiki/Stat_(system_call)">Wiki&lt;/a>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>st_dev&lt;/strong> - ID zařízení, na kterém je soubor uložen&lt;/li>
&lt;li>&lt;strong>st_ino&lt;/strong> - Číslo &lt;a href="http://cs.wikipedia.org/wiki/Inode">inode&lt;/a>&lt;/li>
&lt;li>&lt;strong>st_mode&lt;/strong> -Obsahuje práva k souboru&lt;/li>
&lt;li>&lt;strong>st_nlink&lt;/strong> - Počet &lt;a href="%22http://cs.wikipedia.org/wiki/Pevn%C3%BD_odkaz">pevných odkazů&lt;/a>&lt;/li>
&lt;li>&lt;strong>st_uid&lt;/strong> - ID vlastníka&lt;/li>
&lt;li>&lt;strong>st_gid&lt;/strong> - ID skupiny ve, které je vlastník&lt;/li>
&lt;li>&lt;strong>st_size&lt;/strong> - Celková velikost v bytech&lt;/li>
&lt;li>&lt;strong>st_atime&lt;/strong> - Čas posledního přístupu k souboru&lt;/li>
&lt;li>&lt;strong>st_mtime&lt;/strong> - Čas poslední změny&lt;/li>
&lt;li>&lt;strong>st_ctime&lt;/strong> - Poslední změna statusu (= změna čísla inode)&lt;/li>
&lt;/ul>
&lt;p>Pro další využití bude nejdůležitější obsah &lt;code>st_mode&lt;/code>. Pro testování jeho obsahu jsou zavedeny mimo jiné &lt;a href="http://pubs.opengroup.org/onlinepubs/7908799/xsh/sysstat.h.html">mimo jiné&lt;/a> tyto masky:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>S_IFREG&lt;/strong> - Jde o soubor&lt;/li>
&lt;li>&lt;strong>S_IFLNK&lt;/strong> - Jde o symbolický odkaz&lt;/li>
&lt;li>&lt;strong>S_IFDIR&lt;/strong> - Jde o adresář&lt;/li>
&lt;li>&lt;strong>S_IRUSR&lt;/strong> - Práva pro čtení vlastníkem&lt;/li>
&lt;li>&lt;strong>S_IWUSR&lt;/strong> - Práva pro zápis vlastníkem&lt;/li>
&lt;li>&lt;strong>S_IXUSR&lt;/strong> - Práva pro spuštění vlastníkem&lt;/li>
&lt;/ul>
&lt;p>Krom masek existuje ještě několik maker. Jako jediný parametr &lt;code>m&lt;/code> se jim předává &lt;code>st_mode&lt;/code>. Návratovou hodnotou maker je buď 0, v případě že test neuspěl nebo nenulová hodnota pokud test uspěl.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>S_ISDIR(m)&lt;/strong> - Jde o adresář&lt;/li>
&lt;li>&lt;strong>S_ISFIFO(m)&lt;/strong> - Jde o &lt;a href="http://cs.wikipedia.org/wiki/Roura_(Unix)">rouru&lt;/a> nebo speciální soubor &lt;a href="%22https://cs.wikipedia.org/wiki/Metoda_FIFO">FIFO&lt;/a>&lt;/li>
&lt;li>&lt;strong>S_ISREG(m)&lt;/strong> - Jde o soubor&lt;/li>
&lt;li>&lt;strong>S_ISLNK(m)&lt;/strong> - Jde o symbolický adresář&lt;/li>
&lt;/ul>
&lt;p>Konečně je čas na ukázku použití funkce &lt;code>stat&lt;/code> v akci:&lt;/p>
&lt;!-- raw HTML omitted --></content></item><item><title>Debian: Problém s LC_MESSAGES</title><link>https://jan.malcak.cz/debian-problem-s-lc_messages/</link><pubDate>Tue, 07 May 2013 21:33:00 +0200</pubDate><guid>https://jan.malcak.cz/debian-problem-s-lc_messages/</guid><description>Po dlouhé době spokojeného používání Debianu jsem dnes po troše šťourání se v systémových knihovnách znovu instaloval. Při apt-get dist-upgrade jsem ale narazil na následující chybovou hlášku:
locale: Cannot set LC_CTYPE to default locale: No such file or directory locale: Cannot set LC_MESSAGES to default locale: No such file or directory locale: Cannot set LC_COLLATE to default locale: No such file or directory Řešením nakonec bylo nainstalovat balík locales a locales-all a spustit příkaz:</description><content>&lt;p>Po dlouhé době spokojeného používání Debianu jsem dnes po troše šťourání se v systémových knihovnách znovu instaloval. Při &lt;code>apt-get dist-upgrade&lt;/code> jsem ale narazil na následující chybovou hlášku:&lt;/p>
&lt;pre>&lt;code>locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_MESSAGES to default locale: No such file or directory
locale: Cannot set LC_COLLATE to default locale: No such file or directory
&lt;/code>&lt;/pre>
&lt;p>Řešením nakonec bylo nainstalovat balík &lt;code>locales&lt;/code> a &lt;code>locales-all&lt;/code> a spustit příkaz:&lt;/p>
&lt;pre>&lt;code>locale-gen
&lt;/code>&lt;/pre>
&lt;p>Při hledání řešení jsem také narazil na možnost, že není uveden seznam lokalizací, ze kterých se má vybírat. V takovém případě editujte soubor &lt;code>/etc/locale.gen&lt;/code> a odkomentujte (odstraňte znak # na začátku řádku) řádky s vaší lokalizací. Například v mém případě to je:&lt;/p>
&lt;pre>&lt;code>cs_CZ.UTF-8 UTF-8
&lt;/code>&lt;/pre>
&lt;p>Teprve pak je možné spustit příkaz &lt;code>locale-gen&lt;/code>.&lt;/p></content></item><item><title>Použití příkazu chmod</title><link>https://jan.malcak.cz/pouziti-prikazu-chmod/</link><pubDate>Sat, 05 Mar 2011 23:06:00 +0200</pubDate><guid>https://jan.malcak.cz/pouziti-prikazu-chmod/</guid><description>chmod je linuxový příkaz, který změní přístupová práva k souboru nebo adresáři. Přístupová práva jsou jakési pravidla, která systému říkají, co kdo smí se souborem nebo adresářem dělat. chmod rozlišuje právo na spouštění, právo na zápis a právo na čtení a jejich vzájemné mutace (o tom za chvíli). Každé právo má své číselné označení:
0 - bez práva 1 - právo na spuštění 2 - právo na zápis 4 - právo na čtení Aby se rozlišilo, pro koho dané pravidlo platí, zadávají se v trojmístném čísle: XXX, kde první místo znamená práva uživatele, který soubor vlastní, druhé místo jsou práva skupiny, ve které uživatel je a třetí jsou práva ostatních.</description><content>&lt;p>&lt;code>chmod&lt;/code> je linuxový příkaz, který změní přístupová práva k souboru nebo adresáři. Přístupová práva jsou jakési pravidla, která systému říkají, co kdo smí se souborem nebo adresářem dělat. &lt;code>chmod&lt;/code> rozlišuje právo na spouštění, právo na zápis a právo na čtení a jejich vzájemné mutace (o tom za chvíli). Každé právo má své číselné označení:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>0&lt;/strong> - bez práva&lt;/li>
&lt;li>&lt;strong>1&lt;/strong> - právo na spuštění&lt;/li>
&lt;li>&lt;strong>2&lt;/strong> - právo na zápis&lt;/li>
&lt;li>&lt;strong>4&lt;/strong> - právo na čtení&lt;/li>
&lt;/ul>
&lt;p>Aby se rozlišilo, pro koho dané pravidlo platí, zadávají se v trojmístném čísle: XXX, kde první místo znamená &lt;strong>práva uživatele&lt;/strong>, který soubor vlastní, druhé místo jsou &lt;strong>práva skupiny&lt;/strong>, ve které uživatel je a třetí jsou &lt;strong>práva ostatních&lt;/strong>.&lt;/p>
&lt;p>Nyní se vrátím k tomu, že &lt;code>chmod&lt;/code> používá mutace výše uvedených práv. Je to víc než logické, protože jinak by nešlo zapsat to, aby uživatel měl právo jak zapisovat tak číst. Proto se číselná označení práv sčítají:&lt;/p>
&lt;pre>&lt;code>1 (právo ke spuštění) + 2 (právo na zápis) = 3 (uživatel může jak číst, tak zapisovat)
&lt;/code>&lt;/pre>
&lt;p>Nyní už víte vše, co je potřeba a tak doplním plně funkční příklad. Mějme soubor &lt;em>test.txt&lt;/em>, kterému budeme chtít nastavit:&lt;/p>
&lt;ul>
&lt;li>uživatel může číst, zapisovat i spouštět (4 + 2 + 1)&lt;/li>
&lt;li>skupina může číst a zapisovat (4 + 2)&lt;/li>
&lt;li>ostatní mohou jen číst (4)&lt;/li>
&lt;/ul>
&lt;p>Příkaz:&lt;/p>
&lt;pre>&lt;code>chmod 764 test.txt
&lt;/code>&lt;/pre>
&lt;p>A to je celé.&lt;/p>
&lt;h1 id="další-příkazy">Další příkazy&lt;/h1>
&lt;p>Nastaví souboru &lt;em>soubor2&lt;/em> stejná práva, jako má &lt;em>soubor:&lt;/em>&lt;/p>
&lt;pre>&lt;code>chmod --reference=soubor soubor2
&lt;/code>&lt;/pre>
&lt;p>Nastaví práva rekurzivně (tedy bude procházet všechny podadresáře):&lt;/p>
&lt;pre>&lt;code>chmod -r 700 ./
&lt;/code>&lt;/pre>
&lt;p>Změní vlastníka souboru:&lt;/p>
&lt;pre>&lt;code>chown root file.txt
&lt;/code>&lt;/pre>
&lt;p>Změní vlastníka i skupinu:&lt;/p>
&lt;pre>&lt;code>chown petr:uzivatele file.txt
&lt;/code>&lt;/pre></content></item><item><title>Linux: Snímek obrazovky</title><link>https://jan.malcak.cz/linux-snimek-obrazovky/</link><pubDate>Sun, 09 Aug 2009 21:43:00 +0200</pubDate><guid>https://jan.malcak.cz/linux-snimek-obrazovky/</guid><description>Applet do panelu Asi nejdednoduším způsobem je aplet, který si velice jednoduše vložíte do panelu. Po přidání se objeví ikonka která po stisku zachytí požadovaný obrázek. Tato varianta nemá mnoho nastavení a možností, zato však stojí nejméně práce a je funkčí skoro ihned.
Přidání apletu Pravým tlačítkem myši klikněte na panel, kam chcete aplet přidat. Po kliknutí se objeví malé okénko - klikněte na Přidat nové položky. Po otevření okna najděte plet jménem Snímek obrazovky a klikněte na Přidat.</description><content>&lt;h1 id="applet-do-panelu">Applet do panelu&lt;/h1>
&lt;p>Asi nejdednoduším způsobem je aplet, který si velice jednoduše vložíte do panelu. Po přidání se objeví ikonka která po stisku zachytí požadovaný obrázek. Tato varianta nemá mnoho nastavení a možností, zato však stojí nejméně práce a je funkčí skoro ihned.&lt;/p>
&lt;h2 id="přidání-apletu">Přidání apletu&lt;/h2>
&lt;p>Pravým tlačítkem myši klikněte na panel, kam chcete aplet přidat. Po kliknutí se objeví malé okénko - klikněte na &lt;strong>Přidat nové položky&lt;/strong>. Po otevření okna najděte plet jménem &lt;strong>Snímek obrazovky&lt;/strong> a klikněte na &lt;strong>Přidat&lt;/strong>. Po přidání si musíte aplet nastavit - vše je čistě na vás (Nastavení jde později neomezeně měnit).&lt;/p>
&lt;h2 id="použití-apletu">Použití apletu&lt;/h2>
&lt;p>Pokud budete není potřebovat aplet použít, stačí kliknout na ikonku fotoaparátu.&lt;/p>
&lt;h1 id="gimp">Gimp&lt;/h1>
&lt;p>Na pořízení snímku lze také použít grafický editor Gimp. Pořízení snímku provedete následovně: Klikněte na položku &lt;em>Soubor&lt;/em> -&amp;gt; &lt;em>Create (Vytvořit)&lt;/em> a vyberte &lt;em>Snímek obrazovky&lt;/em>. Vše si nastavte dle libosti.&lt;/p>
&lt;h1 id="příkaz-import">Příkaz &lt;code>import&lt;/code>&lt;/h1>
&lt;p>Snímek můžete pořídit i tak, že do konzole zadáte příkaz:&lt;/p>
&lt;pre>&lt;code>import -window root obrazek.png
&lt;/code>&lt;/pre>
&lt;p>Samozřejmě si musíte upravit adresu kam se soubor uloží (v tomto případě je to složka &lt;code>root&lt;/code>) a také jméno souboru (v tomto případě je to &lt;code>obrazek.png&lt;/code>). Pro správný běh musíte nainstalovat balíček &lt;code>imagemagic&lt;/code>.&lt;/p>
&lt;h1 id="příkaz-xwd">Příkaz &lt;code>xwd&lt;/code>&lt;/h1>
&lt;p>Postup je skoro totožný jako u příkazu &lt;code>import&lt;/code>. Po zapnutí konzole napište příkaz:&lt;/p>
&lt;pre>&lt;code>xwd &amp;gt; obrazek.xwd
&lt;/code>&lt;/pre>
&lt;p>Zachycený obrázek bude ve formátu xwd – ten si musíte převést na něco známějšího (např. jpg), k tomu může posloužit třeba Gimp.&lt;/p>
&lt;h1 id="klávesa-printscreen">Klávesa PrintScreen&lt;/h1>
&lt;p>Pokud máte prostředí Gnome a na vaší klávesnici je tlačítko PrintScreen (nebo PrtScr) můžete si jejím stiskem vytvořit snímek obrazovky. Není zde žádné nastavení,ale tato možnost nepotřebuje žádný program a je asi nejrychlejší že všech popsaných možností.&lt;/p>
&lt;h1 id="screengrab">Screengrab&lt;/h1>
&lt;p>Screengrab je rozšíření pro Firefox, které umožňuje pořídit snímek celé (opravdu celé, ne jen části kterou vidíte) stránky, který si následně uložíte. Screengrab si jde stáhnout &lt;a href="https://addons.mozilla.org/cs/firefox/addon/screengrab-fix-version/">zde&lt;/a>&lt;/p>
&lt;h1 id="snímek-konzole">Snímek konzole&lt;/h1>
&lt;p>Pokud nemáte grafické prostředí (nastavujete systém, apod.) můžete si pořídit snímek pomocí příkazu:&lt;/p>
&lt;pre>&lt;code>fbgrab -s 5 obrazek.png
&lt;/code>&lt;/pre>
&lt;p>Tento příkaz počká 5 vteřin, a pak zachytí snímek jménem &lt;code>obrazek.png&lt;/code>.&lt;/p></content></item></channel></rss>