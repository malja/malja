<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>programování on Jan Malčák</title>
    <link>https://malja.github.io/docs/tags/programov%C3%A1n%C3%AD/</link>
    <description>Recent content in programování on Jan Malčák</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>Po nocích píše Honza</copyright>
    <lastBuildDate>Thu, 31 Aug 2017 22:14:00 +0200</lastBuildDate><atom:link href="https://malja.github.io/docs/tags/programov%C3%A1n%C3%AD/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>PHP: Validace bankovního čísla</title>
      <link>https://malja.github.io/docs/php-validace-bankovniho-cisla/</link>
      <pubDate>Thu, 31 Aug 2017 22:14:00 +0200</pubDate>
      
      <guid>https://malja.github.io/docs/php-validace-bankovniho-cisla/</guid>
      <description></description>
      <content>&lt;!-- raw HTML omitted --&gt;
</content>
    </item>
    
    <item>
      <title>Arduino: Programování Attiny85</title>
      <link>https://malja.github.io/docs/arduino-programovani-attiny85/</link>
      <pubDate>Sat, 26 Mar 2016 22:50:00 +0200</pubDate>
      
      <guid>https://malja.github.io/docs/arduino-programovani-attiny85/</guid>
      <description>Teď, možná po roce či dvou, jsem je vyhrabal z krabice. Stále jsem přesně netušil, co s nimi, ale v hlavě se mi pár nápadů rýsovalo.
Z mých posledních pokusů jsem si pamatoval, že standardní USBisp, které jsem si koupil na programování čipů ATmega328 nejde použít. Nejjednodušší náhradou se mi jevilo využít Arduino Uno. Na internetu jsem našel velké množství tutoriálů, navíc jde o celkem jednoduchou záležitost.
Prvně je třeba přidat podporu pro čipy rodiny ATtiny do Arduino IDE.</description>
      <content>&lt;p&gt;Teď, možná po roce či dvou, jsem je vyhrabal z krabice. Stále jsem přesně netušil, co s nimi, ale v hlavě se mi pár nápadů rýsovalo.&lt;/p&gt;
&lt;p&gt;Z mých posledních pokusů jsem si pamatoval, že standardní USBisp, které jsem si koupil na programování čipů ATmega328 nejde použít. Nejjednodušší náhradou se mi jevilo využít Arduino Uno. Na internetu jsem našel velké množství tutoriálů, navíc jde o celkem jednoduchou záležitost.&lt;/p&gt;
&lt;p&gt;Prvně je třeba přidat podporu pro čipy rodiny ATtiny do Arduino IDE. Od posledně se situace radikálně zlepšila a není třeba ručně cokoliv stahovat, rozbalovat a kopírovat na správné místo.&lt;/p&gt;
&lt;p&gt;V Arduino IDE otevřete &lt;strong&gt;Nastavení&lt;/strong&gt; -&amp;gt; &lt;strong&gt;File&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Preferences&lt;/strong&gt; a do kolonky &lt;em&gt;Additional Boards Manager URLs&lt;/em&gt; vložte jednu z následujících adres:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://raw.githubusercontent.com/damellis/attiny/ide-1.6.x-boards-manager/package_damellis_attiny_index.json&#34;&gt;https://raw.githubusercontent.com/damellis/attiny/ide-1.6.x-boards-manager/package_damellis_attiny_index.json&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://drazzy.com/package_drazzy.com_index.json&#34;&gt;http://drazzy.com/package_drazzy.com_index.json&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;První z nich přidává podporu jen pro ATtiny 44/45/84/85. Druhá je mnohem rozsáhlejší. Pro mé potřeby až zbytečně.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    &lt;img src=&#34;AddAttinySupport.gif&#34;  alt=&#34;Přidání podpory pro Attiny&#34;   /&gt;
    
      &lt;figcaption class=&#34;center&#34; &gt;Přidání podpory pro Attiny&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;Nyní v &lt;strong&gt;Tools&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Board&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Boards Manager&lt;/strong&gt; vyberte a nainstalujeme ATtiny.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    &lt;img src=&#34;AddAttinySupport2.gif&#34;   /&gt;
    
      &lt;figcaption class=&#34;center&#34; &gt;Výše popsaný postup pro přidání podpory Attiny do Arduino IDE&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;Tím jsme naučili Arduino IDE hovořit jazykem ATtiny kmene. Už stačí jen udělat z Arduina programátor. Po připojení Arduina k počítači v IDE stačí vybrat vzorový příklad &lt;strong&gt;ArduinoISP&lt;/strong&gt;
(&lt;strong&gt;File&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Examples&lt;/strong&gt; -&amp;gt; &lt;strong&gt;ArduinoISP&lt;/strong&gt; -&amp;gt; &lt;strong&gt;ArduinoISP&lt;/strong&gt;) a nahrát ho. Tím se z Arduina stal programátor, který propojíme s ATtiny a můžeme začít.&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    &lt;img src=&#34;attiny85-pinout-simplified.png&#34;   /&gt;
    
      &lt;figcaption class=&#34;center&#34; &gt;Popis pinů. Počítáno z levé horní strany po řádcích: (1) Reset (8) VCC, (2) A3 (7) Pin D2, (3) Pin A2 (6) Pin D1, (4) GND (5) Pin D0&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;Propojení je následující:&lt;/p&gt;

  &lt;figure class=&#34;center&#34; &gt;
    &lt;img src=&#34;http://highlowtech.org/wp-content/uploads/2011/06/Screen-shot-2011-06-06-at-1.46.39-PM.png&#34;   /&gt;
    
      &lt;figcaption class=&#34;center&#34; &gt;Zapojení Arduina UNO a Attiny85 pro programování. Vypůjčeno z http://highlowtech.org/?p=1706&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;ul&gt;
&lt;li&gt;ATtiny pin &lt;strong&gt;2&lt;/strong&gt; do Arduino pinu &lt;strong&gt;13&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ATtiny pin &lt;strong&gt;1&lt;/strong&gt; do Arduino pinu &lt;strong&gt;12&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ATtiny pin &lt;strong&gt;0&lt;/strong&gt; do Arduino pinu &lt;strong&gt;11&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ATtiny pin &lt;strong&gt;Reset&lt;/strong&gt; do Arduino pinu &lt;strong&gt;10&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Teď už jen stačí otevřít Sketch, vybrat čip, který budete programovat a nastavit jako programátor &lt;strong&gt;Arduino as ISP&lt;/strong&gt; a vše nahrát.&lt;/p&gt;
&lt;p&gt;A ještě krátká poznámka na konec. Pokud stejně jako já, budete mít trable s nastavením exsterního oscilátoru, doporučuji před nahráním Sketche vypálit &lt;em&gt;Bootloader&lt;/em&gt; (&lt;strong&gt;Tools&lt;/strong&gt; -&amp;gt; &lt;strong&gt;Burn Bootloader&lt;/strong&gt;)&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>Arduino: Odpojení při nahrávání programu</title>
      <link>https://malja.github.io/docs/arduino-odpojeni-pri-nahravani-programu/</link>
      <pubDate>Sat, 14 Mar 2015 22:49:00 +0200</pubDate>
      
      <guid>https://malja.github.io/docs/arduino-odpojeni-pri-nahravani-programu/</guid>
      <description>Při experimentování s Arduinem jsem narazil na podivný problém. Po několika malých úpravách kódu mi editor při nahrávání programu hlásil
Error opening serial port &#39;/dev/ttyACM1&#39;  To vše doplněné dlouhým výpisem kde se chyba vyskytla.
Jako by to nestačilo, Arduino se poté odpojí. Pro připojení bylo nutné vytáhnout a opět zastrčit napájecí USB kabel. Tím se bohužel problém s odpojováním nevyřešil. Obšírným nahlédnutím do složky /dev jsem zjistil, že soubor ttyACM1 existuje.</description>
      <content>&lt;p&gt;Při experimentování s Arduinem jsem narazil na podivný problém. Po několika malých úpravách kódu mi editor při nahrávání programu hlásil&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Error opening serial port &#39;/dev/ttyACM1&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To vše doplněné dlouhým výpisem kde se chyba vyskytla.&lt;/p&gt;
&lt;p&gt;Jako by to nestačilo, Arduino se poté odpojí. Pro připojení bylo nutné vytáhnout a opět zastrčit napájecí USB kabel. Tím se bohužel problém s odpojováním nevyřešil. Obšírným nahlédnutím do složky &lt;code&gt;/dev&lt;/code&gt; jsem zjistil, že soubor &lt;code&gt;ttyACM1&lt;/code&gt; existuje. Příkaz &lt;code&gt;lsusb&lt;/code&gt; Arduino našel. Problém tedy musel být někde jinde.&lt;/p&gt;
&lt;p&gt;Problém přetrvával i po změně zdrojového kódu či načtení některého z příkladů. Nezbylo mi tak, než použít Google. Dle všeho šlo o přepsání hodnoty:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Serial.begin(9600);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;na&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Serial.begin(14400);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Nová hodnota se uloží do uživatelského nastavení. Z nějakého mě neznámého důvodu zůstane tato hodnota v nastavení &amp;ldquo;zadrblá&amp;rdquo; i po opětovné úpravě zdrojáků. Je tedy nutné smazat soubor s nastavením (u mě &lt;code&gt;~/arduino/preferences.txt&lt;/code&gt; a restartovat editor.&lt;/p&gt;
</content>
    </item>
    
    <item>
      <title>SDL2: Snímek obrazovky</title>
      <link>https://malja.github.io/docs/post/</link>
      <pubDate>Wed, 19 Mar 2014 20:57:00 +0200</pubDate>
      
      <guid>https://malja.github.io/docs/post/</guid>
      <description>SDL s sebou ve druhé verzi přinesl i změnu vykreslování na obrazovku. Místo v RAM uložených SDL_Surface je v SDL2 použita SDL_Texture uložená na video RAM, kde je plně v jurisdikci GPU. Krom citelných změn na rychlost vykreslování se také změnil způsob, jakým lze zachytit snímek obrazovky.
Při použití textur se SDL_Surface okna neaktualizuje, pokud bychom použili dřívější způsob, dostali bychom prázdný snímek. Bohužel standardní funkce SDL_SaveBMP (ani její nedokumentovaná obdoba v rozšíření SDL_image - IMG_SavePNG) nepodporuje uložení SDL_Texture.</description>
      <content>&lt;p&gt;SDL s sebou ve druhé verzi přinesl i změnu vykreslování na obrazovku. Místo v RAM uložených &lt;a href=&#34;https://wiki.libsdl.org/SDL_Surface&#34;&gt;SDL_Surface&lt;/a&gt; je v SDL2 použita &lt;a href=&#34;https://wiki.libsdl.org/SDL_Texture&#34;&gt;SDL_Texture&lt;/a&gt; uložená na video RAM, kde je plně v jurisdikci GPU. Krom citelných změn na rychlost vykreslování se také změnil způsob, jakým lze zachytit snímek obrazovky.&lt;/p&gt;
&lt;p&gt;Při použití textur se &lt;code&gt;SDL_Surface&lt;/code&gt; okna neaktualizuje, pokud bychom použili dřívější způsob, dostali bychom prázdný snímek. Bohužel standardní funkce &lt;a href=&#34;https://wiki.libsdl.org/SDL_SaveBMP&#34;&gt;SDL_SaveBMP&lt;/a&gt; (ani její nedokumentovaná obdoba v rozšíření &lt;code&gt;SDL_image&lt;/code&gt; - &lt;code&gt;IMG_SavePNG&lt;/code&gt;) nepodporuje uložení &lt;code&gt;SDL_Texture&lt;/code&gt;. Je proto nejprve nutná konverze z &lt;code&gt;SDL_Texture&lt;/code&gt; na &lt;code&gt;SDL_Surface&lt;/code&gt;. Teprve pak je možné snímek obrazovky uložit.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h1 id=&#34;použité-funkce&#34;&gt;Použité funkce&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.libsdl.org/SDL_RenderGetViewport&#34;&gt;SDL_RenderGetViewport&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.libsdl.org/SDL_CreateRGBSurface&#34;&gt;SDL_CreateRGBSurface&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.libsdl.org/SDL_GetError&#34;&gt;SDL_GetError&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.libsdl.org/SDL_RenderReadPixels&#34;&gt;SDL_RenderReadPixels&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://wiki.libsdl.org/SDL_FreeSurface&#34;&gt;SDL_FreeSurface&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
    </item>
    
    <item>
      <title>Android: Horizontální čára</title>
      <link>https://malja.github.io/docs/android-horizontalni-cara/</link>
      <pubDate>Wed, 28 Aug 2013 15:03:00 +0200</pubDate>
      
      <guid>https://malja.github.io/docs/android-horizontalni-cara/</guid>
      <description>V Androidu neexistuje (alespoň o tom nevím) žádná nativní cesta jak vytvořit horizontální čáru. Naštěstí si jde vypomoci i jinak:
&amp;lt;View android:layout_width=&amp;#34;match_parent&amp;#34; android:layout_height=&amp;#34;1dip&amp;#34; android:background=&amp;#34;#000000&amp;#34;&amp;gt; </description>
      <content>&lt;p&gt;V Androidu neexistuje (alespoň o tom nevím) žádná nativní cesta jak vytvořit horizontální čáru. Naštěstí si jde vypomoci i jinak:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;View&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;android:layout_width=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;match_parent&amp;#34;&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;android:layout_height=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1dip&amp;#34;&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;android:background=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;#000000&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content>
    </item>
    
    <item>
      <title>Generování HTML z PHP polí</title>
      <link>https://malja.github.io/docs/generovani-html-z-php-poli/</link>
      <pubDate>Wed, 28 Aug 2013 10:53:00 +0200</pubDate>
      
      <guid>https://malja.github.io/docs/generovani-html-z-php-poli/</guid>
      <description>Při výpisu objemných PHP polí byli mými nejlepšími společníky funkce print_r() a var_dump(). Výpis z nich se navíc musí dále obalit přinejmenším do tagů pre, aby výstup byl alespoň trochu čitelný. Navíc postup, který jsem k tomu používal:
echo &amp;#34;&amp;lt;pre&amp;gt;&amp;#34;;print_r($promenna);echo &amp;#34;&amp;lt;/pre&amp;gt;&amp;#34;; se mi v kódu vůbec nelíbil. Proto jsem si vytvořil třídu, která formátování obstará za mě. Tak vznikla třída Tabletizer. Díky ní je vytvoření pěkné tabulky otázkou pár řádků:</description>
      <content>&lt;p&gt;Při výpisu objemných PHP polí byli mými nejlepšími společníky funkce &lt;code&gt;print_r()&lt;/code&gt; a &lt;code&gt;var_dump()&lt;/code&gt;. Výpis z nich se navíc musí dále obalit přinejmenším do tagů &lt;code&gt;pre&lt;/code&gt;, aby výstup byl alespoň trochu čitelný. Navíc postup, který jsem k tomu používal:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;pre&amp;gt;&amp;#34;&lt;/span&gt;;&lt;span style=&#34;color:#a6e22e&#34;&gt;print_r&lt;/span&gt;($promenna);&lt;span style=&#34;color:#66d9ef&#34;&gt;echo&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;/pre&amp;gt;&amp;#34;&lt;/span&gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;se mi v kódu vůbec nelíbil. Proto jsem si vytvořil třídu, která formátování obstará za mě. Tak vznikla třída &lt;code&gt;Tabletizer&lt;/code&gt;. Díky ní je vytvoření pěkné tabulky otázkou pár řádků:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;$table &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Tabletizer&lt;/span&gt;();
&lt;span style=&#34;color:#66d9ef&#34;&gt;echo&lt;/span&gt; $table&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;fromArray&lt;/span&gt;($promenna);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Jasně, řádky neušetřím, ale vypadá to o mnoho lépe.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Poznámka z roku 2018:&lt;/strong&gt; Zpětně by bylo vhodnější využít kratší název třídy a metodu &lt;code&gt;fromArray&lt;/code&gt; udělat statickou.&lt;/p&gt;
&lt;p&gt;A to je vše. Výstupem může být třeba i takováto tabulka.&lt;/p&gt;

  &lt;figure class=&#34;left&#34; &gt;
    &lt;img src=&#34;https://github.com/malja/archive/blob/master/php/Tabletizer/website/img/tabletizer.png?raw=true&#34;  alt=&#34;Tabletizer&#34;   /&gt;
    
      &lt;figcaption class=&#34;center&#34; &gt;Tabletizer&lt;/figcaption&gt;
    
  &lt;/figure&gt;


&lt;p&gt;Díky tomu, že hlavní tabulce je přiřazena třída &lt;code&gt;.tabletizer&lt;/code&gt;, je velice jednoduché vytvořit si jakýkoli styl, který sedí do okolního &amp;ldquo;prostředí&amp;rdquo;. Vzhled tabulky si je možné jakkoli přizpůsobit.&lt;/p&gt;
&lt;p&gt;Odkaz ke stažení, spolu s návodem a seznamem změn je možné najít na &lt;a href=&#34;https://github.com/malja/archive/tree/master/php/Tabletizer&#34;&gt;této stránce&lt;/a&gt;&lt;/p&gt;
</content>
    </item>
    
  </channel>
</rss>
